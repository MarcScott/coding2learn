<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Dear Theresa, &mdash; Coding 2 Learn</title>
  <meta name="author" content="Marc Scott">

  <link href="http://coding2learn.org/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
        title="Coding 2 Learn Atom Feed" />
  <link href="http://coding2learn.org/feeds/all.rss.xml" type="application/rss+xml" rel="alternate"
        title="Coding 2 Learn RSS Feed" />






  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">


    <link href="http://coding2learn.org/favicon.png" rel="icon">

  <link href="http://coding2learn.org/theme/css/main.css" media="screen, projection"
        rel="stylesheet" type="text/css">

  <link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
  <link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
</head>

<body>
  <header role="banner"><hgroup>
  <h1><a href="http://coding2learn.org/">Coding 2 Learn</a></h1>
    <h2>Education and Technology Ramblings with a little Politics for good measure.</h2>
</hgroup></header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://coding2learn.org/feeds/all.atom.xml" rel="subscribe-atom">Atom</a></li>
  <li><a href="http://coding2learn.org/feeds/all.rss.xml" rel="subscribe-rss">RSS</a></li>
</ul>


<ul class="main-navigation">
    <li><a href="/archives.html">Archives</a></li>
    <li><a href="http://coding2learn.org">Blog</a></li>
</ul></nav>
  <div id="main">
    <div id="content">
<div>
  <article class="hentry" role="article">
<header>
      <h1 class="entry-title">Dear Theresa,</h1>
    <p class="meta">
<time datetime="2017-06-11T00:00:00+01:00" pubdate>Sun 11 June 2017</time>    </p>
</header>

  <div class="entry-content"><p>I haven't written anything here for a couple of years, but recent events have inspired me to once again touch fingers to keyboard, in the hope that you might read this.</p>
<p>What I'd like to talk to you about is <strong>encryption</strong>. Wait a second... Please keep reading. I know the subject can sound dull and overly technical. I recognise that you may have been told it's too difficult to understand for the layperson. You might even have been led to believe that encryption is the reason terrorists can get away with atrocities. However, If you give me just 15 minutes or so of your time, then I'm sure you'll be better informed about what encryption is, and I'll also tell you how you can go about ensuring that encryption never again thwarts the country's security services. What have you got to lose?</p>
<h2>What is Encryption?</h2>
<p>Encryption is simply hiding information so that only an authorised individual can read it. Here's a simple analogy. if you want to send a message to your friend Robert, then you could buy yourself a metal box with a padlock. The padlock has two keys. One key you keep and the other you give to Robert. This way you can write a message, lock it in the box, and send the box to Robert, knowing that he's the only other person with a key, that can open it.</p>
<p>Sending messages in padlocked boxes isn't a great way of communicating though. For a start, it doesn't take much more than a hacksaw and a few spare minutes to cut through the padlock and dig out the message. Secondly, your postman is going to end up hating you for constantly sending heavy metal boxes through the mail.</p>
<p>In cryptography, rather than using physical keys and lockable boxes, we use mathematics.</p>
<p>The message you want to hide is called <strong>plaintext</strong>. Once the message has been encrypted it's called <strong>ciphertext</strong>. A <strong>key</strong> can be used to change plaintext to ciphertext and visa versa.</p>
<p>One of the earliest methods of encrypting messages was called the Caesar cipher, so named because according to some sources it was used by the Roman Emperor Julius Caesar, when he sent messages to his generals.</p>
<p>Imagine I want to encrypt the message <code>the quick brown fox jumps over the lazy dog</code>. First I choose a key between 1 and 25. Let's go for 13. I then shift every letter in my message forward in the alphabet by 13 places. Here's a handy guide to show you the letter substitutions:</p>
<div class="highlight"><pre><span></span>a b c d e f g h i j k l m n o p q r s t u v w x y z
| | | | | | | | | | | | | | | | | | | | | | | | | |
n o p q r s t u v w x y z a b c d e f g h i j k l m
</pre></div>


<p>So any <code>a</code> in my plaintext message becomes an <code>n</code> in the ciphertext. A <code>b</code> becomes an <code>o</code>. My full message becomes <code>gur dhvpx snfg sbk whzcf bire gur ynml qbt</code>. This looks like complete nonsense, right? I can now send this message to Robert, and so long as Robert is aware that the key is 13, all he has to do is shift each letter in the message back by 13 places to decrypt the message.</p>
<p>The Caesar cipher was useless, even before the age of computers. For a start, it's easy to <strong>brute force</strong> the ciphertext to plaintext.</p>
<p>Brute force just means trying all the possible combinations of a key, until you are successful. All an evil party --- let's call her Evelyn --- needs do is try every key from 1 to 25. She'll know after the first couple of words have been decrypted if she's found the key or not.</p>
<p>If Evelyn chooses not to brute force the answer, she could look at letter frequencies. For instance the letters <code>e</code> and <code>t</code> are the most frequently found letters in the English language. So all she needs to do is find the two most common letters in the cipher text, and she can probably assume these are the letters <code>e</code> and <code>t</code>. This then lets her work out what the key is.</p>
<p>This message has been encrypted using the Caesar cipher, and I have absolutely no doubt that it can easily be decrypted, even though I haven't used the number 13 as a key.</p>
<div class="highlight"><pre><span></span>exm tee fxg dghp ahp xfimr tgw phkmaexll bl max ihpxk hy dbgzl, yhk maxkx bl ghgx phkmar hy max gtfx, unm ax pahf axtoxg, xtkma, tgw lxt huxr ur xmxkgte etpl.
</pre></div>


<p><a href="https://github.com/MarcScott/simple_encryption/blob/master/cc.py">Here's an example of the Caesar Cipher, written in Python</a> that I have used to teach teenagers about encryption.</p>
<h2>Early unbreakable encryption</h2>
<p>There were various improvements on the Caesar cipher, but they all suffer from being easily brute forced or being subjected to letter frequency analysis. This all changed with the invention of the one-time pad.</p>
<p>The one-time pad is a genuine unbreakable method of encrypting and decrypting messages. To continue the analogy, it's like using a padlocked box, where both the padlock and the box are made from an unbreakable metal, and you never use the same key/lock combination twice.</p>
<p>The one-time pad is at it's heart a twin pair of notebooks, identical in every way. On each page of the notebooks there is a grid of random numbers. These numbers can be chosen by a computer, or a much more analogue method such as a bingo machine.</p>
<p>Here is an example of a single page of a one-time pad, only using the numbers 0-26 for simplicity's sake.</p>
<div class="highlight"><pre><span></span>| 14 |  8 |  4 | 16 | 17 | 12 |  4 | 13 |  5 |  4 |
|  9 | 19 | 23 | 16 |  8 |  9 | 25 | 21 | 12 |  1 |
| 19 | 17 |  5 | 11 |  0 | 13 | 22 |  2 |  4 | 21 |
|  5 | 14 | 22 | 23 |  3 |  1 | 14 | 18 |  9 | 24 |
|  7 | 23 | 23 | 20 | 10 |  7 | 22 | 16 | 20 | 17 |
|  4 |  2 | 12 | 23 | 24 |  4 |  1 | 19 | 24 |  2 |
| 11 | 25 |  3 | 12 |  4 |  1 | 17 | 25 | 16 |  8 |
| 17 |  8 |  9 | 15 |  5 | 19 | 12 |  5 |  0 | 11 |
|  7 |  6 | 19 |  5 | 16 |  1 |  3 | 13 | 10 |  4 |
| 24 | 17 | 25 |  9 |  6 |  9 |  9 | 11 | 17 | 17 |
</pre></div>


<p>Now imagine that you and Robert want to exchange messages. You both have copies of the same pad and importantly agree to destroy each page once it has been used once, so you always use a different page for each message you encrypt.</p>
<p>Now you can send Robert a message. Maybe:</p>
<div class="highlight"><pre><span></span>Meet me at the pub at nine
</pre></div>


<p>So the first character in the message is an <code>m</code>, and the first number in the one-time pad is <code>14</code>. This means that the character <code>m</code> gets shifted fourteen places forward in the alphabet (cycling back around to <code>a</code> once <code>z</code> has been reached). The cipher text of the character <code>m</code> is now an <code>a</code>. Then you move on to the next, shifting the first <code>e</code> by eight places and the second <code>e</code> by four places.</p>
<p>In this way the message becomes:</p>
<div class="highlight"><pre><span></span>amij yi fx meu ytw bm stnr
</pre></div>


<p>The beauty of this method of encryption is that brute forcing a solution is impossible. The only clue you have as to what the cipher text contains is the length of each word. Letter frequency analysis is also impossible, as the same characters will be encrypted using different, random, shifts each time. You'll notice that the character <code>e</code> becomes <code>m</code>, <code>i</code>, <code>i</code> and then <code>r</code> in the encryption above.</p>
<p>You can find a simple example of how to create a one-time pad encryption scheme, written in Python, <a href="https://github.com/MarcScott/simple_encryption/blob/master/otp.py">here</a></p>
<p>So we have unbreakable encryption, but it has one colossal flaw. In this case, the major problem is <strong>Key Exchange</strong>. You and Robert need to exchange one-time pads. The only safe way to do this is to meet in person and physically hand over the pads (be they printed on paper or stored as files on flash memory). You can't email a one-time pad to Robert, because it could easily be intercepted by the nefarious Evelyn, who can then use her copy of the pad to decrypt all your messages. She doesn't even need to know which page you are using, as she can easily now brute force a decryption just by getting a computer to try every single page on each encrypted message.</p>
<p>If a one-time pad has been intercepted during key exchange, it is useless. That's why I know that the following message, using the one-time pad above, can easily be decrypted.</p>
<div class="highlight"><pre><span></span>vbxfj://jr.pfaqydyub.fwr/jemm/hwpfcfbxxsy
</pre></div>


<h2>Public Key Cryptography</h2>
<p>Clever mathematicians worked out a method to overcome the problems of key exchange back in the 1970s. Yes, that's right, this technology has been around for nearly fifty years!</p>
<p>The analogy gets pulled a little thin here. You want Robert to send you a secret message. So you send out a padlock to everyone in the world, or maybe you just have a bin filled with padlocks that sit outside of your house. We'll call these padlocks your <strong>Public Key</strong>, rather confusingly. You keep the key that can unlock the padlocks safe, and there is only one key. This is called your <strong>Private Key</strong>. Now, anyone can send you a message in a box, and use your public key to lock the box. They can't open the box and neither can anyone else. The box can then be safely sent in the mail, and nobody along the journey can unlock it, until it reaches your house at which point you can unlock the box.</p>
<p>Mathematically this works on a simple principle. Let's take two prime numbers <code>13337</code> and <code>103171</code>.
It's trivially easy to prove that <code>13337 x 103171 = 1375991627</code>. You can just type it into a calculator. It's really hard to find two prime numbers that when multiplied together makes exactly <code>1375991627</code> though. You don't have much choice but to keep multiplying prime numbers together until you find the two that work. Now in this example a computer can do it fairly quickly, but as we increase the size of the prime numbers, the length of time it takes a computer to brute force the solution, quickly stretches to the known life of the Universe.</p>
<p>This clever maths with primes can be used to encrypt messages. To see how easy this is to implement, we can use really low prime numbers, and what is known as the <a href="https://en.wikipedia.org/wiki/RSA_(cryptosystem)">RSA cryptosystem</a>. The mathematics gets a little complicated, but most people with a reasonable understanding of secondary maths can manage it. I know, as I've taught it to twelve and thirteen year-olds.</p>
<ul>
<li>Choose three prime numbers. Let's go for <code>13</code>, <code>17</code> and <code>19</code>.</li>
<li>Multiply the two largest numbers together. <code>17 x 19 = 323</code></li>
<li>Your public key is now a combination of this product and the small prime number <code>323 13</code>. You can share this with the world.</li>
<li>To get your private key, you need to subtract <code>1</code> from your two large primes and multiply them together.</li>
</ul>
<div class="highlight"><pre><span></span>17 - 1 = 16

19 - 1 = 18

16 * 18 = 288
</pre></div>


<ul>
<li>Then find a number that when multiplied by the small prime and divided by this product, gives a remainder of <code>1</code>.</li>
</ul>
<div class="highlight"><pre><span></span>some_number * 13 รท 288 = some_other_number remainder 1
</pre></div>


<ul>
<li>In this case that number is <code>133</code>. Computers can quite easily calculate this.</li>
</ul>
<div class="highlight"><pre><span></span>133 * 13 = 1729
1729 รท 288 = 6 remainder 1
</pre></div>


<ul>
<li>You now have your private key. It's <code>323 133</code></li>
</ul>
<p>Now please bare with me. It's important that you understand that although the maths maybe a little complicated, it's not that difficult to implement. You send you public key off over the internet, and Robert gets his copy.</p>
<ul>
<li>
<p>Robert wants to encrypt the letter <code>q</code> to send it to you. He converts it to a number first, using it's position in the alphabet - <code>17</code></p>
</li>
<li>
<p>Now he raises that number to the power of the second part of your public key. </p>
</li>
</ul>
<div class="highlight"><pre><span></span>17 ** 13 = 9904578032905937
</pre></div>


<ul>
<li>Now he divides that number by the first part of your public key, and works out the remainder.</li>
</ul>
<div class="highlight"><pre><span></span>9904578032905937 รท 323 = 30664328275250 remainder 187
</pre></div>


<ul>
<li>
<p>This number - <code>187</code> is now the ciphertext, that Robert can send off to you.</p>
</li>
<li>
<p>You receive the number <code>187</code> by email. Raise it to the power of the second part of your private key.</p>
</li>
</ul>
<div class="highlight"><pre><span></span>187 ** 133 = 142867573740720566967281881607100347295847400907671386091157121622780454369129479664615460769905626347535899931271341842520680048730294079130102722601895364310787622375946501020768888839654428347116807175403923673347503784689653101030237682797486439417148026581600192839120518456938618487878401112343947
</pre></div>


<ul>
<li>Wow, That's a big number. Now calculate the remainder when that number is divided by the first part of your private key.</li>
</ul>
<div class="highlight"><pre><span></span>142867573740720566967281881607100347295847400907671386091157121622780454369129479664615460769905626347535899931271341842520680048730294079130102722601895364310787622375946501020768888839654428347116807175403923673347503784689653101030237682797486439417148026581600192839120518456938618487878401112343947

รท 323 = 

442314469785512581539161245422235995778036566832043721231550219640260682060418642693079682615153948474292406207252865372224104020193042907357701452102267201984216551240583474414661674655052564333398394342775448312722776663559110370250126302215824888785001731815323491471101026301914858467798032580608

remainder 17
</pre></div>


<ul>
<li>Notice that remainder. It's <code>17</code>, which is the position of <code>q</code> in the alphabet. You've decrypted the ciphertext and have the plaintext that Robert sent you.</li>
</ul>
<p>Now obviously you have to do this maths on every letter in your message, but computers can do that very easily. Also using small prime numbers makes this pretty easy to brute force, but again computers come to the rescue by being able to perform these calculations on large primes without too much effort. I hope you can see how trivially easy it is to enact a basic form of encryption, using little more than a scientific calculator, that is almost impossible to crack.</p>
<p>To show you how easy this was to implement, the functions to encrypt and decrypt text can be found <a href="https://github.com/MarcScott/simple_encryption/blob/master/poor_rsa.py">here</a></p>
<p>I even generated basic private and public keys using the numbers 983, 991, 997, to send you this very special message.</p>
<div class="highlight"><pre><span></span>976887, 181803, 1, 987990, 311560, 987990, 181803, 288665, 311560, 86240, 287704, 836375, 332585, 311560, 249126, 875736, 287704, 311560, 65832, 875736, 875736, 332585, 24625, 461705, 97073, 311560, 1, 987990, 311560, 976887, 1, 461705, 332585, 288665, 44919
</pre></div>


<h2>Better Encryption Algorithms</h2>
<p>I'm not going to detail the other encryption algorithms available. RSA was one of the first, and the simplest. There are many many more, such as <a href="https://en.wikipedia.org/wiki/Pretty_Good_Privacy#OpenPGP">OpenPGP</a>, <a href="https://en.wikipedia.org/wiki/Blowfish_%28cipher%29">Blowfish</a> and <a href="https://en.wikipedia.org/wiki/Advanced_Encryption_Standard">AES</a>. You can read up about these on Wikipedia and many other places on the Web. You can download implementations of these algorithms from various sites to use in combination with your email and other messaging applications. You can even grab the code off GitHub and use encryption in your own software.</p>
<h2>Some advice on combating encryption</h2>
<p>Now that you hopefully have some understanding of encryption, let's have a brief chat about how you could go about stopping people from using it to send secret messages to each other, that the security services can't read.</p>
<ol>
<li>
<p><strong>Stop national and international companies using encryption in their products.</strong> This means not only stopping Facebook, Apple and Google using cryptography techniques in their messaging applications, you're also going to need to talk to Mozilla, for instance, as encryption is widely used on the web. You'll need to stop banks and other financial institutions from using encryption on their web traffic as well. If companies outside your jurisdiction refuse, you'd have to block access to their services, in much the same way China and North Korea do.</p>
</li>
<li>
<p><strong>Remove access to code repositories where encryption software is freely available.</strong> This includes sites such as GitHub and BitBucket, that developers use on a daily basis. There are many others that need blocking as well, and developers are a wily bunch, so you might need to get rid of Google Drive and Dropbox, as it's fairly easy to use these services to store code. Russian tried this and failed, but you could give it a go.</p>
</li>
<li>
<p><strong>Block or destroy sources of information that detail how encryption algorithms work.</strong> This includes sites such as StackOverflow where encryption algorithms and how to code them are discussed, as well as Wikipedia where the algorithms are detailed. There are a plethora of books you'll also need to ban that teach cryptography techniques. These will need to be outlawed and existing copies in homes and libraries destroyed. I hear that burning is an effective way of destroying a book.</p>
</li>
<li>
<p><strong>Stop teaching encryption techniques in Mathematics and Computer Science courses at a University level.</strong> You might also need to review the teaching of number theory in secondary schools. It's probably best if children are not taught about prime numbers, to be sure that they don't reinvent any cryptography techniques.</p>
</li>
<li>
<p><strong>Put me in prison and restrict my access to any form of communication with the outside world.</strong> I've promoted encrypted communication, taught about encrypted communication and used encrypted communication. I'm not going to stop.</p>
</li>
</ol>
<p>Yours faithfully</p>
<p>Marc Scott</p>
<p>note: I'm not a  Cryptography, Mathematics or Computer Science expert. I'm an educator. <a href="https://github.com/MarcScott/coding2learn/blob/master/content/dear-theresa.markdown">This post can be found on Github</a> and if you would like to correct or improve any elements then issues and pull requests are appreciated.</p></div>
    <footer>
<p class="meta">
  <span class="byline author vcard">
    Posted by <span class="fn">
        Marc Scott
    </span>
  </span>
<time datetime="2017-06-11T00:00:00+01:00" pubdate>Sun 11 June 2017</time>  <span class="categories">
    <a class='category' href='http://coding2learn.org/category/misc.html'>misc</a>
  </span>
</p><div class="sharing">
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://coding2learn.org/blog/2017/06/11/dear-theresa/" data-via="coding2learn" data-counturl="http://coding2learn.org/blog/2017/06/11/dear-theresa/" >Tweet</a>
  <div class="g-plusone" data-size="medium"></div>
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
</div>    </footer>
  </article>

</div>
<aside class="sidebar">

<section>
    <a href="http://twitter.com/coding2learn" class="twitter-follow-button" data-show-count="true">Follow @coding2learn</a>
</section>
  <section>
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
      <li class="post">
          <a href="http://coding2learn.org/blog/2017/06/11/dear-theresa/">Dear Theresa,</a>
      </li>
      <li class="post">
          <a href="http://coding2learn.org/blog/2014/10/23/every-lesson-should-be-a-hackathon/">Every Lesson Should Be A Hackathon</a>
      </li>
      <li class="post">
          <a href="http://coding2learn.org/blog/2014/08/08/one-year-on/">One Year On</a>
      </li>
      <li class="post">
          <a href="http://coding2learn.org/blog/2014/05/18/computer-games-are-a-waste-of-time/">Computer Games Are A Waste Of Time</a>
      </li>
      <li class="post">
          <a href="http://coding2learn.org/blog/2014/04/14/please-stop-sending-me-your-shitty-word-documents/">Please stop sending me your shitty Word documents</a>
      </li>
    </ul>
  </section>
  <section>
      
    <h1>Categories</h1>
    <ul id="recent_posts">
        <li><a href="http://coding2learn.org/category/misc.html">misc</a></li>
    </ul>
  </section>
 

  <section>
  <h1>Tags</h1>
  </section>



  <section>
    <h1>GitHub Repos</h1>
    <ul id="gh_repos">
      <li class="loading">Status updating...</li>
    </ul>
    <script type="text/javascript">
      $.domReady(function(){
          if (!window.jXHR){
              var jxhr = document.createElement('script');
              jxhr.type = 'text/javascript';
              jxhr.src = 'http://coding2learn.org/theme/js/jXHR.js';
              var s = document.getElementsByTagName('script')[0];
              s.parentNode.insertBefore(jxhr, s);
          }

          github.showRepos({
              user: 'MarcScott',
              count: 5,
              skip_forks: false,
              target: '#gh_repos'
          });
      });
    </script>
    <script src="http://coding2learn.org/theme/js/github.js" type="text/javascript"> </script>
  </section>

  
</aside>    </div>
  </div>
  <footer role="contentinfo"><p>
    Copyright &copy;  2012&ndash;2017  Marc Scott &mdash;
  <span class="credit">Powered by <a href="http://getpelican.com">Pelican</a></span>
</p></footer>
  <script src="http://coding2learn.org/theme/js/modernizr-2.0.js"></script>
  <script src="http://coding2learn.org/theme/js/ender.js"></script>
  <script src="http://coding2learn.org/theme/js/octopress.js" type="text/javascript"></script>
    <script type="text/javascript">
        var pkBaseURL = (("https:" == document.location.protocol) ? "https://www.coding2learn.org/piwik/" : "http://www.coding2learn.org/piwik/");
    document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
    </script><script type="text/javascript">
        try {
        var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 1);
        piwikTracker.trackPageView();
        piwikTracker.enableLinkTracking();
        } catch( err ) {}
    </script>
    <noscript><p><img src="//www.coding2learn.org/piwik/piwik.php?idsite=1" style="border:0" alt="" /></p></noscript>
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>
  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
</body>
</html>